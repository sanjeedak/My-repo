import{j as e,R as T,u as k,b as C,r as p,L as P,a as I,e as L}from"./index-JHV42PaI.js";import{A as q}from"./AuthFormLayout-nAh7G4md.js";import{I as F}from"./InfoCards-DKFlAvRp.js";const A=({currentStep:a})=>{const s=["Vendor Info","Shop Info","Business Info"];return e.jsx("div",{className:"flex items-center w-full mb-8",children:s.map((n,o)=>{const t=o+1,d=t===a,i=t<a;return e.jsxs(T.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-lg font-bold transition-all duration-300 ${d?"bg-blue-600 text-white scale-110":i?"bg-green-500 text-white":"bg-gray-200 text-gray-500"}`,children:i?"âœ”":t}),e.jsx("p",{className:`mt-2 text-[10px] sm:text-xs font-semibold ${d?"text-blue-600":"text-gray-500"}`,children:n})]}),o<s.length-1&&e.jsx("div",{className:`flex-1 h-1 mx-2 transition-colors duration-300 ${i?"bg-green-500":"bg-gray-200"}`})]},n)})})},E=({formData:a,handleChange:s,errors:n})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(m,{id:"first_name",label:"First Name",type:"text",value:a.first_name,onChange:s,error:n.first_name}),e.jsx(m,{id:"last_name",label:"Last Name",type:"text",value:a.last_name,onChange:s,error:n.last_name}),e.jsx(m,{id:"email",label:"Email",type:"email",value:a.email,onChange:s,error:n.email}),e.jsx(m,{id:"phone",label:"Phone Number",type:"tel",value:a.phone,onChange:s,error:n.phone}),e.jsx(m,{id:"password",label:"Password",type:"password",value:a.password,onChange:s,error:n.password}),e.jsx(m,{id:"confirmPassword",label:"Confirm Password",type:"password",value:a.confirmPassword,onChange:s,error:n.confirmPassword})]})}),B=({formData:a,handleChange:s,handleFileChange:n,errors:o})=>{var t,d;return e.jsxs("div",{className:"space-y-6",children:[e.jsx(m,{id:"name",label:"Store Name",type:"text",value:a.name,onChange:s,error:o.name}),e.jsx(m,{id:"address",label:"Address",type:"text",value:a.address,onChange:s,error:o.address}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(m,{id:"city",label:"City",type:"text",value:a.city,onChange:s,error:o.city}),e.jsx(m,{id:"state",label:"State",type:"text",value:a.state,onChange:s,error:o.state}),e.jsx(m,{id:"country",label:"Country",type:"text",value:a.country,onChange:s,error:o.country}),e.jsx(m,{id:"postal_code",label:"Postal Code",type:"text",value:a.postal_code,onChange:s,error:o.postal_code})]}),e.jsx(w,{id:"logo",label:"Upload Logo",onChange:n,fileName:(t=a.logo)==null?void 0:t.name,helpText:"Image ratio 1:1, Max size 2MB"}),e.jsx(w,{id:"banner",label:"Upload Banner",onChange:n,fileName:(d=a.banner)==null?void 0:d.name,helpText:"Image ratio 2:1, Max size 2MB"})]})},$=({formData:a,handleChange:s,errors:n})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(m,{id:"gst_number",label:"GST Number",type:"text",value:a.gst_number,onChange:s,error:n.gst_number}),e.jsx(m,{id:"pan_number",label:"PAN Number",type:"text",value:a.pan_number,onChange:s,error:n.pan_number,required:!1})]})}),m=({id:a,label:s,type:n,value:o,onChange:t,error:d,required:i=!0})=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:a,className:"block text-sm font-medium text-gray-700",children:s}),e.jsx("input",{id:a,name:a,type:n,value:o,onChange:t,required:i,className:`mt-1 block w-full px-3 py-2 border ${d?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm`}),d&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:d})]}),w=({id:a,label:s,onChange:n,fileName:o,helpText:t,required:d=!0})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsxs("div",{className:"flex text-sm text-gray-600",children:[e.jsxs("label",{htmlFor:a,className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none",children:[e.jsx("span",{children:"Upload a file"}),e.jsx("input",{id:a,name:a,type:"file",className:"sr-only",onChange:n,required:d})]}),e.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),o?e.jsx("p",{className:"text-xs text-green-600 font-semibold",children:o}):e.jsx("p",{className:"text-xs text-gray-500",children:t})]})})]}),R=()=>{const a=k(),{t:s}=C(),[n,o]=p.useState(1),[t,d]=p.useState({first_name:"",last_name:"",email:"",phone:"",password:"",confirmPassword:"",name:"",address:"",city:"",state:"",country:"",postal_code:"",logo:null,banner:null,gst_number:"",pan_number:"",agreedToTerms:!1}),[i,u]=p.useState({}),[h,f]=p.useState(!1),b=c=>{const{name:r,value:x,type:l,checked:S}=c.target;d(g=>({...g,[r]:l==="checkbox"?S:x})),i[r]&&u(g=>({...g,[r]:null}))},y=c=>{const{name:r,files:x}=c.target;d(l=>({...l,[r]:x[0]})),i[r]&&u(l=>({...l,[r]:null}))},j=c=>{const r={};return c===1&&(t.first_name||(r.first_name="First name is required."),t.last_name||(r.last_name="Last name is required."),/^\S+@\S+\.\S+$/.test(t.email)||(r.email="Invalid email format."),/^\d{10}$/.test(t.phone)||(r.phone="Phone must be 10 digits."),t.password.length<6&&(r.password="Password must be at least 6 characters."),t.password!==t.confirmPassword&&(r.confirmPassword="Passwords do not match.")),c===2&&(t.name||(r.name="Store name is required."),t.address||(r.address="Address is required."),t.city||(r.city="City is required."),t.state||(r.state="State is required."),t.country||(r.country="Country is required."),/^\d{6}$/.test(t.postal_code)||(r.postal_code="Pincode must be 6 digits."),t.logo||(r.logo="Store logo is required."),t.banner||(r.banner="Store banner is required.")),c===3&&(t.gst_number||(r.gst_number="GST number is required."),t.agreedToTerms||(r.agreedToTerms="You must agree to the terms.")),r},v=()=>{const c=j(n);Object.keys(c).length>0?u(c):(u({}),o(r=>r+1))},N=()=>o(c=>c-1),_=async c=>{c.preventDefault();const r=j(n);if(Object.keys(r).length>0){u(r);return}f(!0),u({});const x=new FormData;Object.keys(t).forEach(l=>{l!=="confirmPassword"&&l!=="agreedToTerms"&&x.append(l,t[l])});try{const l=await I(L.vendorSignup,{method:"POST",body:x,headers:{"Content-Type":void 0}});if(l.success)console.log("Application submitted successfully! Redirecting to login."),a("/vendor/signin");else throw new Error(l.message||"Submission failed.")}catch(l){u({submit:l.message||"An error occurred during submission."})}finally{f(!1)}};return e.jsxs("div",{className:"bg-slate-50",children:[e.jsxs(q,{footerText:s("already_have_account"),footerLink:"/vendor/signin",footerActionText:s("Signin"),children:[e.jsx("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-2",children:s("create_vendor_account")}),e.jsx(A,{currentStep:n}),e.jsxs("form",{onSubmit:_,className:"space-y-8",children:[n===1&&e.jsx(E,{formData:t,handleChange:b,handleFileChange:y,errors:i}),n===2&&e.jsx(B,{formData:t,handleChange:b,handleFileChange:y,errors:i}),n===3&&e.jsx($,{formData:t,handleChange:b,errors:i}),i.submit&&e.jsx("p",{className:"text-xs text-red-600 text-center",children:i.submit}),e.jsxs("div",{className:"pt-4",children:[n===1&&e.jsx("button",{type:"button",onClick:v,className:"w-full flex justify-center py-3 px-4 rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:s("next")}),n===2&&e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:N,className:"w-full flex justify-center py-3 px-4 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-gray-200 hover:bg-gray-300",children:s("back")}),e.jsx("button",{type:"button",onClick:v,className:"w-full flex justify-center py-3 px-4 rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:s("next")})]}),n===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"agreedToTerms",name:"agreedToTerms",type:"checkbox",checked:t.agreedToTerms,onChange:b,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:"agreedToTerms",className:"ml-2 block text-sm text-gray-900",children:[s("i_agree_to_terms")," ",e.jsx(P,{to:"/terms",className:"text-blue-600 hover:underline",children:s("terms_and_conditions")})]})]}),i.agreedToTerms&&e.jsx("p",{className:"text-xs text-red-600",children:i.agreedToTerms}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:N,className:"w-full flex justify-center py-3 px-4 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-gray-200 hover:bg-gray-300",children:s("back")}),e.jsx("button",{type:"submit",disabled:h,className:"w-full flex justify-center py-3 px-4 rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400",children:s(h?"submitting":"Submit application")})]})]})]})]})]}),e.jsx(F,{})]})};export{w as FileUpload,m as InputField,R as default};

import{c as j,u as w,k as N,d as p,f as C,j as s,A as k,n as i}from"./index-JHV42PaI.js";import{E as A}from"./eye-CmzZc3tr.js";import{H as P}from"./heart-Dd0oiCNL.js";import{S as W}from"./shopping-cart-CxxRy6Tm.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],I=j("star",_),T=({product:e,onQuickView:r})=>{const l=w(),{addToWishlist:h,removeFromWishlist:m,isInWishlist:n}=N(),{addToCart:x}=p(),{isAuthenticated:o}=C(),c=()=>{e!=null&&e.id&&l(`/product/${e.id}`)},g=a=>{a.stopPropagation(),r&&r(e)},f=a=>{if(a.stopPropagation(),!o){i.error("Please log in to manage your wishlist."),l("/signin");return}if(!e||!e.id){i.error("Could not modify wishlist, invalid product data.");return}n(e.id)?m(e.id):h(e)},b=a=>{var d;if(a.stopPropagation(),!o){i.error("Please log in to add items to your cart."),l("/signin");return}const t=((d=e==null?void 0:e.store)==null?void 0:d.id)||(e==null?void 0:e.store_id);if(!e||!e.id||!e.name||!t){console.error("Invalid product data (missing store_id):",e),i.error("Cannot add this item: missing store information.");return}const u=x({...e,store_id:t});i.promise(u,{loading:"Adding to cart...",success:`${e.name} added to cart!`,error:y=>`Error: ${y.message||"Could not add to cart."}`})},v=a=>a?a.startsWith("http")?a:`${k}/${a}`:"https://placehold.co/300x300?text=No+Image";return e?s.jsxs("div",{className:"group relative flex h-full flex-col overflow-hidden rounded-lg border border-gray-200 bg-white text-left shadow-sm transition-all duration-300 hover:shadow-xl",children:[s.jsxs("div",{className:"relative aspect-[4/3] w-full cursor-pointer overflow-hidden border-b border-gray-200",onClick:c,children:[e.discount>0&&s.jsxs("div",{className:"absolute top-2 left-2 z-10 rounded-full bg-red-500 px-1.5 py-0.5 text-[10px] font-bold text-white",children:[e.discount,"% OFF"]}),s.jsx("img",{src:v(e.image),alt:e.name,loading:"lazy",className:"h-full w-full object-contain p-2 transition-transform duration-300 group-hover:scale-105"}),s.jsxs("div",{className:"absolute top-0 right-0 m-2 flex flex-col gap-2 opacity-0 transition-all duration-300 group-hover:opacity-100",children:[s.jsx("button",{onClick:g,className:"rounded-full bg-white p-1.5 text-gray-800 shadow-md hover:bg-gray-200","aria-label":"Quick view",children:s.jsx(A,{className:"h-4 w-4"})}),s.jsx("button",{onClick:f,className:"rounded-full bg-white p-1.5 shadow-md hover:bg-red-100",children:s.jsx(P,{className:`h-4 w-4 ${n(e.id)?"fill-current text-red-500":"text-gray-500"}`})})]})]}),s.jsxs("div",{className:"flex flex-1 flex-col p-2",children:[s.jsxs("div",{className:"mb-1 flex items-center gap-1",children:[[...Array(5)].map((a,t)=>s.jsx(I,{className:`h-3.5 w-3.5 ${t<Math.round(e.rating||0)?"fill-current text-yellow-400":"text-gray-300"}`},t)),s.jsxs("span",{className:"text-xs text-gray-500",children:["(",e.totalReviews||0,")"]})]}),s.jsx("h3",{className:"mb-2 h-10 overflow-hidden text-sm font-semibold text-gray-700",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},title:e.name,children:e.name}),s.jsxs("div",{className:"mt-auto flex items-baseline gap-2",children:[s.jsxs("p",{className:"text-base font-bold text-blue-600",children:["₹",e.price]}),e.discount>0&&s.jsxs("p",{className:"text-xs text-gray-500 line-through",children:["₹",e.originalPrice]})]})]}),s.jsxs("div",{onClick:b,className:"absolute bottom-0 left-0 right-0 flex translate-y-full cursor-pointer items-center justify-center gap-1.5 bg-blue-600 py-2 text-center text-sm font-semibold text-white transition-transform duration-300 group-hover:translate-y-0",children:[s.jsx(W,{className:"h-4 w-4"}),s.jsx("span",{children:"Add to Cart"})]})]}):null};export{T as P};

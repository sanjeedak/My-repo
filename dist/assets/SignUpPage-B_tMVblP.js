import{u as z,f as R,r as i,j as e,L as w,a as E,e as C}from"./index-JHV42PaI.js";import{s as $,v as _}from"./sanatize-DUDiTChI.js";import{I as m}from"./InputField-DK3m_TmN.js";import{R as q,a as O}from"./RadioButton-D6ZtUwTp.js";import"./index-CrZBkDei.js";import"./eye-CmzZc3tr.js";const Y=()=>{const T=z(),{login:k}=R(),[n,F]=i.useState(!0),[x,b]=i.useState(!1),[h,g]=i.useState(""),[a,P]=i.useState({firstName:"",lastName:"",emailPhone:"",password:"",confirmPassword:""}),[j,A]=i.useState(!1),[r,l]=i.useState({}),[u,p]=i.useState(!1),[N,y]=i.useState(""),d=s=>{const{name:t,value:o}=s.target;P(c=>({...c,[t]:$(o)})),l(c=>({...c,[t]:"",submit:""})),y("")},I=s=>{(a.firstName||a.lastName||a.emailPhone||a.password||a.confirmPassword||h)&&!window.confirm("Switching will clear the form. Continue?")||(F(s),b(!1),g(""),P({firstName:"",lastName:"",emailPhone:"",password:"",confirmPassword:""}),l({}))},v=(s,t)=>s.trim()?/^[a-zA-Z\s]{1,30}$/.test(s)?"":`${t} must contain only letters and be max 30 characters`:`${t} is required`,S=()=>{const s={};return s.firstName=v(a.firstName,"First name"),s.lastName=v(a.lastName,"Last name"),s.emailPhone=_(a.emailPhone,n),n&&(a.password?/^(?=.*[A-Za-z])(?=.*\d).{6,20}$/.test(a.password)||(s.password="Password must be 6-20 characters with at least one letter and one number."):s.password="Password is required",a.confirmPassword?a.password!==a.confirmPassword&&(s.confirmPassword="Passwords do not match"):s.confirmPassword="Confirm password is required"),!n&&x&&(/^\d{6}$/.test(h)||(s.otp="OTP must be a 6-digit number")),j||(s.terms="You must accept the Terms of Use"),Object.fromEntries(Object.entries(s).filter(([t,o])=>o))},L=async()=>{const s=S();if(s.emailPhone){l({emailPhone:s.emailPhone});return}p(!0);try{await E(C.sendOtp,{method:"POST",body:{phone:a.emailPhone}}),b(!0),g("")}catch(t){l({submit:t.message||"Failed to send OTP. Please try again."})}finally{p(!1)}},U=async s=>{s.preventDefault();const t=S();if(Object.keys(t).length>0){l(t);return}p(!0),y("");try{const o={first_name:a.firstName,last_name:a.lastName,role:"customer"},c=n?{...o,email:a.emailPhone,password:a.password}:{...o,phone:a.emailPhone,otp:h},f=await E(C.userSignup,{method:"POST",body:c});if(f.success)k(f.data.user,f.data.token),T("/profile");else throw new Error(f.message||"Signup failed. Please try again.")}catch(o){l({submit:o.message||"Signup failed. Please try again."})}finally{p(!1)}};return e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-cover bg-center p-4 font-sans",style:{backgroundImage:"url('/img/auth-background.jpg')"},children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"text-center mb-6",children:e.jsx(w,{to:"/",children:e.jsx("img",{src:"/img/logo_shopzeo.png",alt:"Shopzeo Logo",className:"h-10 mx-auto"})})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 sm:p-10",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:"Create an Account"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Join us and start shopping!"})]}),e.jsxs("form",{className:"space-y-5",onSubmit:U,children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(m,{id:"firstName",name:"firstName",label:"First Name",type:"text",placeholder:"Enter your first name",value:a.firstName,onChange:d,error:r.firstName}),e.jsx(m,{id:"lastName",name:"lastName",label:"Last Name",type:"text",placeholder:"Enter your last name",value:a.lastName,onChange:d,error:r.lastName})]}),e.jsxs(q,{defaultValue:"email",onValueChange:s=>I(s==="email"),className:"flex justify-center space-x-8 pt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(O,{value:"email",id:"r-email"}),e.jsx("label",{htmlFor:"r-email",children:"Use Email"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(O,{value:"phone",id:"r-phone"}),e.jsx("label",{htmlFor:"r-phone",children:"Use Phone"})]})]}),e.jsx(m,{id:"emailPhone",name:"emailPhone",label:n?"Email":"Phone Number",type:n?"email":"tel",placeholder:n?"Enter your email here":"Enter your phone number here",value:a.emailPhone,onChange:d,error:r.emailPhone}),!n&&!x&&e.jsx("button",{type:"button",onClick:L,disabled:u,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:u?"Sending...":"Send OTP"}),x&&e.jsx(m,{id:"otp",name:"otp",label:"Enter OTP",type:"text",placeholder:"Enter 6-digit OTP here",value:h,onChange:s=>g(s.target.value),error:r.otp}),n&&e.jsxs(e.Fragment,{children:[e.jsx(m,{id:"password",name:"password",label:"Password",type:"password",placeholder:"Enter your password here",value:a.password,onChange:d,error:r.password}),e.jsx(m,{id:"confirmPassword",name:"confirmPassword",label:"Confirm Password",type:"password",placeholder:"Confirm your password",value:a.confirmPassword,onChange:d,error:r.confirmPassword})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"terms",name:"terms",type:"checkbox",checked:j,onChange:s=>A(s.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-700",children:["I accept the ",e.jsx(w,{to:"/terms",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Terms of Use"})]})]}),N&&e.jsx("p",{className:"text-green-600 text-sm text-center font-medium",children:N}),r.terms&&e.jsx("p",{className:"text-red-500 text-xs",children:r.terms}),r.submit&&e.jsx("p",{className:"text-red-500 text-xs text-center",children:r.submit}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:u,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-base font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400 transition-colors",children:u?"Creating Account...":"Create Account"})})]}),e.jsx("div",{className:"mt-8 text-center text-sm",children:e.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",e.jsx(w,{to:"/signin",className:"font-semibold text-indigo-600 hover:text-indigo-500",children:"Sign In"})]})})]})]})})};export{Y as default};

import{c as y,r as d,j as e,d as _,u as I,b as F,R as M}from"./index-JHV42PaI.js";import{P as x}from"./index-Dqfn9z8l.js";import{S as T,a as R,b as q}from"./index-CrZBkDei.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],E=y("arrow-left",P);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],A=y("trash-2",V),L=q("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 active:scale-[0.98]",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90 active:bg-primary/80",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90 active:bg-destructive/80",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground active:bg-accent/80",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80 active:bg-secondary/70",ghost:"hover:bg-accent hover:text-accent-foreground active:bg-accent/80",link:"text-primary underline-offset-4 hover:underline active:underline-offset-2"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=d.forwardRef(({className:t,variant:m,size:p,asChild:g=!1,...f},b)=>{const u=g?T:"button";return e.jsx(u,{className:R(L({variant:m,size:p,className:t})),ref:b,...f})});c.displayName="Button";c.propTypes={className:x.string,variant:x.oneOf(["default","destructive","outline","secondary","ghost","link"]),size:x.oneOf(["default","sm","lg","icon"]),asChild:x.bool};const O=()=>{const{cartItems:t,updateQuantity:m,removeItems:p,prepareForCheckout:g,loading:f,clearCart:b}=_(),u=I(),{t:n}=F(),[o,h]=d.useState(new Set);d.useEffect(()=>{h(s=>{const a=new Set(t.map(i=>i.id)),r=new Set;return s.forEach(i=>{a.has(i)&&r.add(i)}),r})},[t]);const v=d.useMemo(()=>t.filter(s=>o.has(s.id)),[t,o]),l=d.useMemo(()=>v.length>0?v:t,[v,t]),w=d.useMemo(()=>l.reduce((s,a)=>{const r=parseFloat(a.product.selling_price||a.product.price||0),i=parseInt(a.quantity,10)||1;return s+r*i},0),[l]),N=l.length,j=t.length>0&&o.size===t.length,k=s=>{h(a=>{const r=new Set(a);return r.has(s)?r.delete(s):r.add(s),r})},C=()=>{h(j?new Set:new Set(t.map(s=>s.id)))},S=()=>{if(o.size>0){const s=t.filter(a=>o.has(a.id)).map(a=>a.product.id);p(s)}},z=()=>{l.length>0&&(g(l),u("/checkout"))};return f?e.jsxs("div",{className:"container mx-auto px-4 py-10 text-center flex flex-col items-center justify-center h-[60vh]",children:[e.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-solid border-blue-600 border-t-transparent"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading your cart..."})]}):t.length===0?e.jsxs("div",{className:"container mx-auto px-4 py-10 text-center flex flex-col items-center justify-center h-[60vh]",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:n("cart_empty")}),e.jsx(c,{size:"lg",onClick:()=>u("/"),className:"bg-blue-600 text-white hover:bg-blue-700",children:n("Continue shopping")})]}):e.jsxs("div",{className:"container mx-auto max-w-4xl px-4 py-10",children:[e.jsxs(c,{variant:"ghost",onClick:()=>u(-1),className:"mb-4",children:[e.jsx(E,{className:"mr-2 h-4 w-4"})," ",n("back")]}),e.jsxs("div",{className:"rounded-lg border bg-card text-card-foreground shadow-sm",children:[e.jsxs("div",{className:"p-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsx("h2",{className:"text-2xl font-semibold leading-none tracking-tight",children:n("your_cart")}),e.jsxs("div",{className:"flex items-center justify-between w-full sm:w-auto gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(c,{variant:"outline",size:"sm",onClick:S,disabled:o.size===0,children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),n("Remove selected")]}),e.jsx(c,{variant:"destructive",size:"sm",onClick:b,children:n("Clear Cart")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"select-all",checked:j,onChange:C,className:"h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"}),e.jsx("label",{htmlFor:"select-all",className:"text-sm font-medium leading-none",children:n("Select all")})]})]})]}),e.jsx("hr",{className:"border-border"}),e.jsx("div",{className:"p-0",children:e.jsx("div",{className:"space-y-4",children:t.map((s,a)=>{var r;return e.jsxs(M.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center p-4 sm:p-6 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 w-full sm:flex-1",children:[e.jsx("input",{type:"checkbox","aria-label":`Select ${s.product.name}`,checked:o.has(s.id),onChange:()=>k(s.id),className:"h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"}),e.jsx("img",{src:s.product.image||`https://placehold.co/80x80?text=${(r=s.product.name)==null?void 0:r[0]}`,alt:s.product.name,className:"w-16 h-16 sm:w-20 sm:h-20 object-contain rounded border"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h3",{className:"font-semibold",children:s.product.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["₹",parseFloat(s.product.selling_price||s.product.price||0).toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center justify-between w-full sm:w-auto sm:justify-end gap-4 sm:gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{variant:"outline",size:"icon",onClick:()=>m(s.product.id,parseInt(s.quantity,10)-1),children:"−"}),e.jsx("span",{className:"px-3 sm:px-4 py-2 border rounded-md min-w-[45px] sm:min-w-[50px] text-center",children:s.quantity}),e.jsx(c,{variant:"outline",size:"icon",onClick:()=>m(s.product.id,parseInt(s.quantity,10)+1),children:"+"})]}),e.jsxs("p",{className:"font-semibold text-md sm:text-lg w-24 sm:w-28 text-right",children:["₹",(parseFloat(s.product.selling_price||s.product.price||0)*s.quantity).toFixed(2)]})]})]}),a<t.length-1&&e.jsx("hr",{className:"border-border"})]},s.id)})})}),e.jsx("hr",{className:"border-border"}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 p-6 bg-muted/50",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold",children:[o.size>0?n("Selected total"):n("Grand Total"),": ",e.jsxs("span",{className:"text-primary",children:["₹",w.toFixed(2)]})]}),e.jsxs(c,{size:"lg",onClick:z,disabled:l.length===0,className:"bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 disabled:text-gray-200 disabled:cursor-not-allowed",children:[n("Proceed to checkout")," (",N,")"]})]})]})]})};export{O as default};

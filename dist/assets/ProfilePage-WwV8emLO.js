import{c as i,f as R,u as D,g as H,b as q,r,a as V,e as B,j as e,o as T,L as X,X as Y}from"./index-JHV42PaI.js";import{S as G}from"./shopping-cart-CxxRy6Tm.js";import{R as J}from"./refresh-cw-BWJTGyN7.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Q=i("camera",K);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Z=i("credit-card",W);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],se=i("lock",ee);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ae=i("map-pin",te);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],le=i("save",re);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],oe=i("square-pen",ne);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ce=i("user",ie),y=({name:a,id:g,label:b,type:c,value:d,onChange:u,error:l})=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:g,className:"block text-sm font-medium text-gray-700 mb-1",children:b}),e.jsx("input",{type:c,id:g,name:a,value:d,onChange:u,className:`w-full border px-4 py-2 rounded-lg ${l?"border-red-500":"border-gray-300"}`}),l&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l})]}),he=()=>{const{user:a,login:g,logout:b,token:c}=R(),d=D(),u=H(),{t:l}=q(),[A,j]=r.useState(!1),[o,m]=r.useState("profile"),[t,N]=r.useState({first_name:"",last_name:"",email:"",phone:"",profileImage:null,profileImageUrl:""}),[C,$]=r.useState([]),[p,M]=r.useState(!1),[v,w]=r.useState(""),[x,E]=r.useState({}),S=r.useRef(null);r.useEffect(()=>{const s=u.hash.replace("#","");["profile","orders","addresses","payment"].includes(s)&&m(s)},[u]);const _=r.useCallback(async()=>{if(!c){w("Authentication token is missing. Please log in again.");return}try{M(!0),w("");const s=await V(B.orders,{headers:{Authorization:`Bearer ${c}`}});if(s.success&&Array.isArray(s.data))$(s.data);else throw $([]),new Error(s.message||"Could not fetch orders.")}catch(s){w(s.message)}finally{M(!1)}},[c]);r.useEffect(()=>{o==="orders"&&_()},[o,_]),r.useEffect(()=>{a&&N({first_name:a.first_name||a.name||"",last_name:a.last_name||"",email:a.email||"",phone:a.phone||"",profileImage:null,profileImageUrl:a.vendorImage||""})},[a]);const f=s=>{const{name:n,value:h}=s.target;N(k=>({...k,[n]:h})),x[n]&&E(k=>({...k,[n]:null}))},I=s=>{if(s.target.files&&s.target.files[0]){const n=s.target.files[0];N(h=>({...h,profileImage:n,profileImageUrl:URL.createObjectURL(n)}))}},F=()=>{const s={};return t.first_name||(s.first_name="First name is required."),s},P=s=>{s.preventDefault();const n=F();if(Object.keys(n).length>0){E(n);return}const h={...a,...t};g(h),j(!1),alert("Profile saved successfully!")},L=()=>S.current.click(),O=()=>{b(),d("/signin")},U=()=>`https://ui-avatars.com/api/?name=${`${t.first_name} ${t.last_name}`.trim()||"User"}&background=EBF4FF&color=7F9CF5&size=128`,z=()=>{switch(o){case"profile":return A?e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Edit Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(y,{name:"first_name",id:"first_name",label:l("first_name"),type:"text",value:t.first_name,onChange:f,error:x.first_name}),e.jsx(y,{name:"last_name",id:"last_name",label:l("last_name"),type:"text",value:t.last_name,onChange:f,error:x.last_name})]}),e.jsx(y,{name:"email",id:"email",label:l("email"),type:"email",value:t.email,onChange:f,error:x.email}),e.jsx(y,{name:"phone",id:"phone",label:l("phone_number"),type:"tel",value:t.phone,onChange:f,error:x.phone}),e.jsxs("div",{className:"flex justify-end pt-4 gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>j(!1),className:"flex items-center gap-2 bg-gray-200 text-gray-800 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300 transition-colors",children:[e.jsx(Y,{className:"h-5 w-5"})," Cancel"]}),e.jsxs("button",{type:"submit",className:"flex items-center gap-2 bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors shadow-sm hover:shadow-md",children:[e.jsx(le,{className:"h-5 w-5"})," ",l("save_changes")]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Personal Information"}),e.jsxs("button",{onClick:()=>j(!0),className:"flex items-center gap-2 bg-blue-100 text-blue-700 px-4 py-2 rounded-lg font-semibold hover:bg-blue-200 transition-colors",children:[e.jsx(oe,{className:"h-4 w-4"})," Edit Profile"]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 space-y-3",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Full Name:"})," ",`${t.first_name} ${t.last_name}`.trim()||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",t.email||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",t.phone||"N/A"]})]})]});case"orders":return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"My Orders"}),e.jsxs("button",{onClick:_,disabled:p,className:"flex items-center gap-2 bg-gray-100 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-200 transition-colors disabled:opacity-50",children:[e.jsx(J,{className:`h-4 w-4 ${p?"animate-spin":""}`})," Refresh"]})]}),p&&e.jsx("p",{children:"Loading your orders..."}),v&&e.jsxs("p",{className:"text-red-500",children:["Error: ",v]}),!p&&!v&&e.jsx("div",{className:"space-y-4",children:C.length>0?C.map(s=>e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg flex flex-col sm:flex-row justify-between sm:items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-semibold text-gray-800",children:["Order ID: #",s.orderNumber]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Date: ",new Date(s.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm font-semibold capitalize ${s.status==="delivered"?"text-green-600":"text-yellow-600"}`,children:s.status}),e.jsxs("p",{className:"font-semibold text-gray-800",children:["â‚¹",parseFloat(s.totalAmount).toFixed(2)]})]}),e.jsx(X,{to:`/track-order/${s.orderNumber}`,state:{order:s},className:"bg-blue-500 text-white text-sm font-bold py-2 px-4 rounded hover:bg-blue-600 transition-colors self-start sm:self-center",children:"Track Order"})]},s.id)):e.jsx("p",{children:"You have not placed any orders yet."})})]});case"addresses":return e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"My Addresses"}),e.jsx("p",{className:"text-gray-500",children:"Manage your shipping and billing addresses. (Feature coming soon)"})]});case"payment":return e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Payment Methods"}),e.jsx("p",{className:"text-gray-500",children:"Manage your saved cards and payment options. (Feature coming soon)"})]});default:return null}};return a?e.jsx("div",{className:"bg-slate-50 min-h-screen py-12",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsxs("div",{className:"lg:col-span-4 space-y-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg text-center",children:[e.jsxs("div",{className:"relative w-32 h-32 mx-auto",children:[e.jsx("img",{src:t.profileImageUrl||U(),alt:"Profile",className:"w-full h-full rounded-full object-cover ring-4 ring-blue-100"}),e.jsx("input",{type:"file",ref:S,className:"hidden",onChange:I,accept:"image/*"}),e.jsx("button",{onClick:L,className:"absolute bottom-1 right-1 bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 transition-transform hover:scale-110 shadow-md","aria-label":"Change profile picture",children:e.jsx(Q,{className:"h-5 w-5"})})]}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mt-4",children:`${t.first_name} ${t.last_name}`.trim()}),e.jsx("p",{className:"text-gray-500 mt-1",children:t.email})]}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>m("profile"),className:`w-full text-left flex items-center gap-3 py-3 px-4 rounded-lg font-medium text-gray-700 transition-colors ${o==="profile"?"bg-blue-100 text-blue-700":"hover:bg-gray-100"}`,children:[e.jsx(ce,{className:"h-5 w-5"})," My Profile"]}),e.jsxs("button",{onClick:()=>m("orders"),className:`w-full text-left flex items-center gap-3 py-3 px-4 rounded-lg font-medium text-gray-700 transition-colors ${o==="orders"?"bg-blue-100 text-blue-700":"hover:bg-gray-100"}`,children:[e.jsx(G,{className:"h-5 w-5"})," My Orders"]}),e.jsxs("button",{onClick:()=>m("addresses"),className:`w-full text-left flex items-center gap-3 py-3 px-4 rounded-lg font-medium text-gray-700 transition-colors ${o==="addresses"?"bg-blue-100 text-blue-700":"hover:bg-gray-100"}`,children:[e.jsx(ae,{className:"h-5 w-5"})," My Addresses"]}),e.jsxs("button",{onClick:()=>m("payment"),className:`w-full text-left flex items-center gap-3 py-3 px-4 rounded-lg font-medium text-gray-700 transition-colors ${o==="payment"?"bg-blue-100 text-blue-700":"hover:bg-gray-100"}`,children:[e.jsx(Z,{className:"h-5 w-5"})," Payment Methods"]}),e.jsx("hr",{className:"my-2"}),e.jsxs("button",{onClick:()=>d("/reset-password"),className:"w-full text-left flex items-center gap-3 py-3 px-4 rounded-lg font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(se,{className:"h-5 w-5"})," ",l("reset_password")]}),e.jsxs("button",{onClick:O,className:"w-full text-left flex items-center gap-3 py-3 px-4 rounded-lg font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(T,{className:"h-5 w-5"})," ",l("logout")]})]})})]}),e.jsx("div",{className:"lg:col-span-8",children:e.jsx("div",{className:"bg-white p-8 rounded-2xl shadow-lg min-h-[400px]",children:z()})})]})})}):e.jsxs("div",{className:"text-center py-20",children:[e.jsx("p",{children:"Please log in to view your profile."}),e.jsx("button",{onClick:()=>d("/signin"),className:"mt-4 bg-blue-600 text-white px-6 py-2 rounded-lg",children:"Login"})]})};export{he as default};

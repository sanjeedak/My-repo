import{u as P,r as d,j as s,L as b,a as j,e as v}from"./index-JHV42PaI.js";import{I as l}from"./InputField-DK3m_TmN.js";import"./index-CrZBkDei.js";import"./eye-CmzZc3tr.js";const E=()=>{const g=P(),[e,x]=d.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[a,i]=d.useState({}),[w,m]=d.useState(!1),[u,f]=d.useState(""),c=r=>{const{name:t,value:o}=r.target;x(n=>({...n,[t]:o})),a[t]&&i(n=>({...n,[t]:null}))},p=()=>{const r={};return e.currentPassword||(r.currentPassword="Current password is required."),e.newPassword?e.newPassword.length<6&&(r.newPassword="Password must be at least 6 characters."):r.newPassword="New password is required.",e.newPassword!==e.confirmPassword&&(r.confirmPassword="Passwords do not match."),r},h=async r=>{r.preventDefault();const t=p();if(Object.keys(t).length>0){i(t);return}m(!0),f("");try{const o={old_password:e.currentPassword,new_password:e.newPassword},n=await j(v.userChangePassword,{method:"POST",body:o});if(n.success)f("Password has been reset successfully!"),setTimeout(()=>{g("/signin")},2e3);else throw new Error(n.message||"Password reset failed.")}catch(o){o.message.includes("not verified")?i({submit:"Account not verified. Please complete verification before changing your password."}):i({submit:o.message||"An error occurred during password reset."})}finally{m(!1)}};return s.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 p-4 font-sans",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsx("div",{className:"text-center mb-6",children:s.jsx(b,{to:"/",children:s.jsx("img",{src:"/img/logo_shopzeo.png",alt:"Shopzeo Logo",className:"h-10 mx-auto"})})}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 sm:p-10",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:"Reset Password"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Enter a new password for your account."})]}),s.jsxs("form",{onSubmit:h,className:"space-y-6",children:[s.jsx(l,{id:"currentPassword",name:"currentPassword",label:"Current Password",type:"password",value:e.currentPassword,onChange:c,error:a.currentPassword}),s.jsx(l,{id:"newPassword",name:"newPassword",label:"New Password",type:"password",value:e.newPassword,onChange:c,error:a.newPassword}),s.jsx(l,{id:"confirmPassword",name:"confirmPassword",label:"Confirm New Password",type:"password",value:e.confirmPassword,onChange:c,error:a.confirmPassword}),u&&s.jsx("p",{className:"text-green-600 text-sm text-center font-medium",children:u}),a.submit&&s.jsx("p",{className:"text-red-500 text-xs text-center",children:a.submit}),s.jsx("div",{className:"pt-2",children:s.jsx("button",{type:"submit",disabled:w,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-base font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400 transition-colors",children:w?"Resetting...":"Reset Password"})})]})]})]})})};export{E as default};
